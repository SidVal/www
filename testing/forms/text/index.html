<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Copiar y pegar</title>
    <link rel="icon" href="https://raw.githubusercontent.com/jantimon/favicons-webpack-plugin/main/example/basic/src/favicon.png" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <style>
      textarea {
        height: 100px;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>

<div class="container-fluid">
  <div class="form-floating">
    <textarea class="form-control" placeholder="Pegar texto aquí" id="text-area" style="height: 100px"></textarea>
    <label for="floatingTextarea2">Contenidos</label>
  </div>
  
  <div class="container-md">  
    <div id="seo-stats">
      <!-- Aquí se mostrarán las estadísticas SEO -->
    </div>
  </div>
</div>
    

    
    <!--Scripts a editar si actualizan Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
    
    <!-- Estadisticas ini -->
<script>
      document.addEventListener("DOMContentLoaded", function() {
        const textArea = document.getElementById("text-area");
        const seoStatsContainer = document.getElementById("seo-stats");

        // Lista de palabras comunes (stop words) que queremos excluir
        const stopWords = [
          "a", "al", "ante", "bajo", "cabe", "con", "contra", "de", "del", "desde",
          "e", "el", "en", "entre", "hacia", "hasta", "para", "por", "según", "sin", "sobre", "tras",
          "durante", "mediante", "excepto", "exceptuando", "hasta", "incluso", "más", "menos", "salvo", "versus",
          "las", "los", "la", "que", "se", "y", "más"
        ];

        // Función para calcular estadísticas SEO
        function calcularEstadisticasSEO() {
          const texto = textArea.value;

          // Tokenizar el texto en palabras
          const palabras = texto.split(/\s+/).filter(Boolean);

          // Excluir palabras comunes
          const palabrasFiltradas = palabras.filter(palabra => !stopWords.includes(palabra.toLowerCase()));

          // Contador de palabras
          const totalPalabras = palabrasFiltradas.length;

          // Cantidad de caracteres (con espacios)
          const caracteresConEspacios = texto.length;

          // Cantidad de caracteres (sin espacios)
          const caracteresSinEspacios = texto.replace(/\s/g, "").length;

          // Calcular la densidad de palabras clave para cada palabra clave
          const palabrasClave = calcularPalabrasClave(palabrasFiltradas, 10);
          const densidadPalabrasClave = calcularDensidadPalabrasClave(palabrasFiltradas, palabrasClave);

          // Mostrar las estadísticas
          seoStatsContainer.innerHTML = `
            <p>Palabras clave (${palabrasClave.length}): ${palabrasClave.join(", ")}</p>
            ${palabrasClave.map((palabra, index) => `<p>Densidad de "${palabra}": ${densidadPalabrasClave[index].toFixed(2)}%</p>`).join("")}
            <p>Total de palabras: ${totalPalabras}</p>
            <p>Caracteres (con espacios): ${caracteresConEspacios}</p>
            <p>Caracteres (sin espacios): ${caracteresSinEspacios}</p>
          `;
        }

        // Función para calcular las palabras clave (las más repetidas)
        function calcularPalabrasClave(palabras, cantidad) {
          const contadorPalabras = {};

          palabras.forEach(palabra => {
            contadorPalabras[palabra] = (contadorPalabras[palabra] || 0) + 1;
          });

          return Object.keys(contadorPalabras)
            .filter(palabra => contadorPalabras[palabra] > 1) // Filtrar palabras repetidas
            .sort((a, b) => contadorPalabras[b] - contadorPalabras[a]) // Ordenar por repetición
            .slice(0, cantidad);
        }

        // Función para calcular la densidad de palabras clave para cada palabra clave
        function calcularDensidadPalabrasClave(palabras, palabrasClave) {
          const densidades = [];

          palabrasClave.forEach(palabra => {
            const cantidadPalabra = palabras.filter(p => p === palabra).length;
            const densidad = (cantidadPalabra / palabras.length) * 100;
            densidades.push(densidad);
          });

          return densidades;
        }

        // Escuchar cambios en el textarea y recalcular estadísticas
        textArea.addEventListener("input", calcularEstadisticasSEO);
      });
    </script>
    <!-- Fin de estadisticas -->
  </body>
</html>
